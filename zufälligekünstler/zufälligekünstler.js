	'use strict';

var words = {
    zitate: 
    [
    {"text":"1 Girl Nation"},
{"text":"13 Stories"},
{"text":"2 Unlimited"},
{"text":"3OH!3"},
{"text":"Paula Abdul  "},
{"text":"Ace of Base  "},
{"text":"Christina Aguilera "},
{"text":"Alcazar "},
{"text":"AlunaGeorge  "},
{"text":"A-L-X "},
{"text":"Ambitious Lovers "},
{"text":"Anastacia "},
{"text":"Annie   "},
{"text":"Aqua  "},
{"text":"David Archuleta "},
{"text":"Tina Arena "},
{"text":"Army of Lovers "},
{"text":"Rick Astley  "},
{"text":"Atomic Kitten  "},
{"text":"The Attic "},
{"text":"Audio Playground"},
{"text":"Aurora "},
{"text":"Avicii  "},
{"text":"Axé Bahia "},
{"text":"B*Witched "},
{"text":"Backstreet Boys  "},
{"text":"Bad Boys Blue "},
{"text":"Zoë Badwi "},
{"text":"Bananarama  "},
{"text":"Banghra "},
{"text":"Azealia Banks "},
{"text":"Bardeux  "},
{"text":"Basement Jaxx   "},
{"text":"Bastille "},
{"text":"Daniel Bedingfield  "},
{"text":"The Beloved "},
{"text":"Betty Who "},
{"text":"The Beu Sisters "},
{"text":"Beyoncé  "},
{"text":"Justin Bieber "},
{"text":"The Black Eyed Peas  "},
{"text":"Black Kids "},
{"text":"Blood Orange  "},
{"text":"Bloodshy & Avant "},
{"text":"The Boomtang Boys "},
{"text":"La Bouche  "},
{"text":"David Bowie "},
{"text":"Brazilian Girls  "},
{"text":"Bronski Beat  "},
{"text":"Chris Brown "},
{"text":"Havana Brown  "},
{"text":"Emma Bunton "},
{"text":"C+C Music Factory "},
{"text":"Can-linn "},
{"text":"Mariah Carey   "},
{"text":"Caribou "},
{"text":"Dina Carroll "},
{"text":"Aaron Carter "},
{"text":"Cascada "},
{"text":"Cause and Effect "},
{"text":"Charli XCX  "},
{"text":"Cher "},
{"text":"Neneh Cherry  "},
{"text":"China Doll "},
{"text":"Ciara "},
{"text":"Classixx "},
{"text":"Clean Bandit  "},
{"text":"Cobra Starship  "},
{"text":"Kimberly Cole "},
{"text":"The Communards  "},
{"text":"Company B "},
{"text":"Ida Corr "},
{"text":"The Cover Girls "},
{"text":"Taio Cruz "},
{"text":"Cut Copy   "},
{"text":"Da Pump "},
{"text":"Taylor Dayne  "},
{"text":"DB Boulevard "},
{"text":"Dead Disco "},
{"text":"Dead or Alive "},
{"text":"Dee Dee "},
{"text":"Deee-Lite  "},
{"text":"Delorean   "},
{"text":"Kat DeLuna "},
{"text":"Destiny's Child "},
{"text":"Deuce "},
{"text":"Dev  "},
{"text":"DHT "},
{"text":"Celine Dion "},
{"text":"Disclosure "},
{"text":"DJ BoBo "},
{"text":"DJ Encore "},
{"text":"Dubstar "},
{"text":"Hilary Duff  "},
{"text":"Stacy Earl "},
{"text":"East 17 "},
{"text":"Eiffel 65  "},
{"text":"Sophie Ellis-Bextor  "},
{"text":"Empire of the Sun  "},
{"text":"Jocelyn Enriquez "},
{"text":"Gloria Estefan  "},
{"text":"Everything Everything  "},
{"text":"Exposé  "},
{"text":"Sky Ferreira  "},
{"text":"Fifth Harmony "},
{"text":"Five "},
{"text":"Flo Rida  "},
{"text":"Foster the People  "},
{"text":"Samantha Fox "},
{"text":"Frankie Goes to Hollywood  "},
{"text":"Fun Factory "},
{"text":"Debbie Gibson  "},
{"text":"Girls Aloud "},
{"text":"globe "},
{"text":"The Go! Team  "},
{"text":"Selena Gomez  "},
{"text":"Wynter Gordon  "},
{"text":"Gorillaz  "},
{"text":"Ellie Goulding  "},
{"text":"Ariana Grande "},
{"text":"David Guetta  "},
{"text":"Her Majesty & the Wolves "},
{"text":"Paris Hilton  "},
{"text":"Hurts  "},
{"text":"Innosense "},
{"text":"La Toya Jackson "},
{"text":"Janet Jackson   "},
{"text":"Michael Jackson   "},
{"text":"Samantha James "},
{"text":"Jewel  "},
{"text":"Joée "},
{"text":"Joy "},
{"text":"Jump5  "},
{"text":"Junior Senior "},
{"text":"Juvelen "},
{"text":"Kesha "},
{"text":"Mary Kiani "},
{"text":"Natalia Kills "},
{"text":"Kim Hyun-jung "},
{"text":"King África "},
{"text":"Kisses "},
{"text":"The KLF "},
{"text":"Solange Knowles  "},
{"text":"Lady Gaga   "},
{"text":"Laila "},
{"text":"George Lamond "},
{"text":"Jessy Lanza "},
{"text":"LCD Soundsystem "},
{"text":"Lisa Lisa and Cult Jam "},
{"text":"LMFAO  "},
{"text":"Locomía "},
{"text":"Jennifer Lopez  "},
{"text":"Louie Louie "},
{"text":"Luciana "},
{"text":"M People  "},
{"text":"Madonna   "},
{"text":"Maroon 5  "},
{"text":"Lisa Matassa (as Lysa Lynn) "},
{"text":"Matt and Kim  "},
{"text":"Mel and Kim "},
{"text":"Javiera Mena "},
{"text":"M.I.A.  "},
{"text":"Miami Sound Machine "},
{"text":"George Michael  "},
{"text":"MiChi "},
{"text":"Mika  "},
{"text":"Milli Vanilli  "},
{"text":"Nicki Minaj  "},
{"text":"Dannii Minogue "},
{"text":"Kylie Minogue   "},
{"text":"Modern Talking "},
{"text":"Moloko  "},
{"text":"Momoiro Clover Z "},
{"text":"Alanis Morissette  "},
{"text":"m.o.v.e "},
{"text":"Movetron "},
{"text":"Samantha Mumba "},
{"text":"James Murphy "},
{"text":"Róisín Murphy  "},
{"text":"N-Trance "},
{"text":"Nabiha"},
{"text":"The Neptunes "},
{"text":"New Kids on the Block "},
{"text":"Olivia Newton-John "},
{"text":"Ne-Yo "},
{"text":"Nikkole "},
{"text":"NRG "},
{"text":"NSYNC  "},
{"text":"OFF "},
{"text":"Emily Osment "},
{"text":"Donny Osmond  "},
{"text":"Kevin Paige "},
{"text":"Paradiso Girls "},
{"text":"Sarina Paris "},
{"text":"Pebbles "},
{"text":"Katy Perry  "},
{"text":"Paul Pesco "},
{"text":"Pet Shop Boys  "},
{"text":"Pink  "},
{"text":"Pizzicato Five  "},
{"text":"Play "},
{"text":"Pnau "},
{"text":"Gabry Ponte "},
{"text":"Prima J "},
{"text":"Prince  "},
{"text":"Private "},
{"text":"The Pussycat Dolls  "},
{"text":"Cara Quici "},
{"text":"Raze  "},
{"text":"Richard X "},
{"text":"Ricki-Lee "},
{"text":"Right Said Fred "},
{"text":"Rihanna "},
{"text":"Robyn "},
{"text":"Rockell "},
{"text":"Kelly Rowland  "},
{"text":"S Club 7 "},
{"text":"Marta Sánchez "},
{"text":"Santigold  "},
{"text":"The Saturdays "},
{"text":"Seiko Matsuda "},
{"text":"Selena Gomez & the Scene "},
{"text":"September "},
{"text":"Shakira  "},
{"text":"Shinee "},
{"text":"Shura "},
{"text":"Sia  "},
{"text":"Jessica Simpson  "},
{"text":"Troye Sivan "},
{"text":"Sam Smith  "},
{"text":"Solid HarmoniE "},
{"text":"Tommy Sparks "},
{"text":"Britney Spears   "},
{"text":"Speed "},
{"text":"Spice Girls  "},
{"text":"Stacey Q "},
{"text":"Stakka Bo "},
{"text":"Alexandra Stan "},
{"text":"Lisa Stansfield "},
{"text":"Brenda K. Starr "},
{"text":"Gwen Stefani "},
{"text":"Steps "},
{"text":"Stevie B "},
{"text":"Stock Aitken Waterman "},
{"text":"Sugababes "},
{"text":"Linda Sundblad "},
{"text":"Swedish House Mafia "},
{"text":"Taylor Swift "},
{"text":"Sylvan Esso  "},
{"text":"T-ara "},
{"text":"T-Spoon "},
{"text":"Take That "},
{"text":"Tarkan "},
{"text":"t.A.T.u.  "},
{"text":"Tegan and Sara  "},
{"text":"Therese "},
{"text":"Tiësto "},
{"text":"Tiffany "},
{"text":"Timbaland "},
{"text":"Justin Timberlake "},
{"text":"The Ting Tings   "},
{"text":"Katy Tiz "},
{"text":"Melissa Tkautz "},
{"text":"TLC "},
{"text":"Judy Torres "},
{"text":"Totally Enormous Extinct Dinosaurs  "},
{"text":"Jolin Tsai "},
{"text":"Usher "},
{"text":"Vassy "},
{"text":"Vengaboys "},
{"text":"V*Enna "},
{"text":"The Very Best  "},
{"text":"Vitamin C  "},
{"text":"Wallpaper  "},
{"text":"Jessie Ware "},
{"text":"Pete Waterman "},
{"text":"Jody Watley  "},
{"text":"Wham! "},
{"text":"Karyn White "},
{"text":"Wild Orchid  "},
{"text":"Will to Power "},
{"text":"Vanessa L. Williams "},
{"text":"Kimberly Wyatt "},
{"text":"XLR8 "},
{"text":"Xuxa "},
{"text":"Yazz "},
{"text":"Yelle  "},
{"text":"Yuri "},

]
};

// Route the incoming request based on type (LaunchRequest, IntentRequest,
// etc.) The JSON body of the request is provided in the event parameter.
exports.handler = function (event, context) {
    try {
        console.log("event.session.application.applicationId=" + event.session.application.applicationId);
       
        if (event.session.application.applicationId !== "amzn1.ask.skill.58d09763-23e3-44b4-a364-1573ddc0d203") {
            context.fail("Wrong App ID");
        }

        if (event.session.new) {
            onSessionStarted({requestId: event.request.requestId}, event.session);
        }

        if (event.request.type === "LaunchRequest") {
            onLaunch(event.request, event.session,
                function callback(sessionAttributes, speechletResponse) {
                    context.succeed(buildResponse(sessionAttributes, speechletResponse));
                });
        } else if (event.request.type === "IntentRequest") {
            onIntent(event.request, event.session,
                function callback(sessionAttributes, speechletResponse) {
                    context.succeed(buildResponse(sessionAttributes, speechletResponse));
                });
        } else if (event.request.type === "SessionEndedRequest") {
            onSessionEnded(event.request, event.session);
            context.succeed();
        } else {
            
        }
    } catch (e) {
        context.fail("Exception: " + e);
    }
};

function onSessionStarted(sessionStartedRequest, session) {
    console.log("onSessionStarted requestId=" + sessionStartedRequest.requestId + ", sessionId=" + session.sessionId);
}

function onLaunch(launchRequest, session, callback) {
    //console.log("onLaunch requestId=" + launchRequest.requestId + ", sessionId=" + session.sessionId);
    var newStringSpeech = getNewString(true)
    callback(session.attributes, buildSpeechletResponse("Zufällige Künstler", newStringSpeech, newStringSpeech, "", true));
}

function onIntent(intentRequest, session, callback) {
    console.log("onIntent requestId=" + intentRequest.requestId + ", sessionId=" + session.sessionId);
    var intent = intentRequest.intent, intentName = intentRequest.intent.name;
    if (intentName == 'NewWordIntent') {
        handleTestRequest(intent, session, callback);
    } else if (intentName == 'TestIntent') {
        handleTestRequest(intent, session, callback);
    } else {
        console.log("Intent: " + JSON.stringify(intentRequest));
        throw "Invalid intent";
    }
}

/**
 * Called when the user ends the session. Is not called when the skill returns shouldEndSession=true.
 */
function onSessionEnded(sessionEndedRequest, session) {
    console.log("onSessionEnded requestId=" + sessionEndedRequest.requestId + ", sessionId=" + session.sessionId);
}

function handleTestRequest(intent, session, callback) {
    var newStringSpeech = getNewString(true)
    callback(session.attributes, buildSpeechletResponse("Zufällige Künstler", newStringSpeech, newStringSpeech, "", true));
}

function getNewString(speechlet, word) {
    var outputString = "";
    outputString += '';
    var i = 0
    for (i = 0; i < 5; i++) {
        var zitat = words.zitate[getRandomInt(0, words.zitate.length)]
        outputString += zitat.text;
    }
    return outputString;
}

/**
 * Returns a random integer between min (inclusive) and max (inclusive)
 * Using Math.round() will give you a non-uniform distribution!
 */
function getRandomInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}

// ------- Helper functions to build responses -------

function buildSpeechletResponse(title, outputCard, outputSpeech, repromptText, shouldEndSession) {
    return {
        outputSpeech: {
            type: "PlainText",
            text: outputSpeech
        },
        card: {
            type: "Simple",
            title: title,
            content: outputCard
        },
        reprompt: {
            outputSpeech: {
                type: "PlainText",
                text: repromptText
            }
        },
        shouldEndSession: shouldEndSession
    };
}

function buildSpeechletResponseWithoutCard(output, repromptText, shouldEndSession) {
    return {
        outputSpeech: {
            type: "PlainText",
            text: output
        },
        reprompt: {
            outputSpeech: {
                type: "PlainText",
                text: repromptText
            }
        },
        shouldEndSession: shouldEndSession
    };
}

function buildResponse(sessionAttributes, speechletResponse) {
    return {
        version: "1.0",
        sessionAttributes: sessionAttributes,
        response: speechletResponse
    };
}
